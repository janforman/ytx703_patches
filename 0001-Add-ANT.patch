From 8566ccaf5e8e7838b0c0f3f9841a5ad6472e5ddb Mon Sep 17 00:00:00 2001
From: Jan Forman <info@janforman.com>
Date: Tue, 25 Jun 2019 17:10:29 +0000
Subject: [PATCH] Add-ANT+

Change-Id: I62f314bd1636a3125aacf20099c2ac14b804613e
---
 BoardConfigCommon.mk | 3 +++
 device-common.mk     | 7 +++++++
 2 files changed, 10 insertions(+)

diff --git a/BoardConfigCommon.mk b/BoardConfigCommon.mk
index 4ef691a..4404e99 100644
--- a/BoardConfigCommon.mk
+++ b/BoardConfigCommon.mk
@@ -73,6 +73,9 @@ TARGET_PROCESS_SDK_VERSION_OVERRIDE := \
     /vendor/bin/mm-qcamera-daemon=27 \
     /system/vendor/bin/mm-qcamera-daemon=27 \
 
+# ANT+
+BOARD_ANT_WIRELESS_DEVICE := "vfs-prerelease"
+
 # Audio
 AUDIO_FEATURE_ENABLED_AAC_ADTS_OFFLOAD := true
 AUDIO_FEATURE_ENABLED_ACDB_LICENSE := true
diff --git a/device-common.mk b/device-common.mk
index 2523124..131b2e0 100644
--- a/device-common.mk
+++ b/device-common.mk
@@ -17,6 +17,12 @@
 # inherit from the proprietary version
 $(call inherit-product, vendor/lenovo/YTX703-common/YTX703-common-vendor.mk)
 
+# ANT+
+PRODUCT_PACKAGES += \
+    AntHalService \
+    com.dsi.ant.antradio_library \
+    libantradio
+
 # Overlays
 DEVICE_PACKAGE_OVERLAYS += $(LOCAL_PATH)/overlay
 
@@ -274,6 +280,7 @@ PRODUCT_COPY_FILES += $(foreach permission, $(wildcard $(LOCAL_PATH)/configs/per
 
 # Standard permissions
 PRODUCT_COPY_FILES += \
+    external/ant-wireless/antradio-library/com.dsi.ant.antradio_library.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/com.dsi.ant.antradio_library.xml \
     frameworks/native/data/etc/android.hardware.audio.low_latency.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.audio.low_latency.xml \
     frameworks/native/data/etc/android.hardware.bluetooth_le.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.bluetooth_le.xml \
     frameworks/native/data/etc/android.hardware.bluetooth.xml:$(TARGET_COPY_OUT_VENDOR)/etc/permissions/android.hardware.bluetooth.xml \
-- 
2.7.4

